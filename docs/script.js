
(()=>{$(".foot .scroll-top").on("click",()=>$("html, body").animate({scrollTop:0}))})();
(()=>{$(".menu .section-name").on("click",function(){$(this).toggleClass("open"),$(this).hasClass("open")?$(this).next().slideDown(300):$(this).next().slideUp(300)}),$(".menu a").on("click",function(a){a.preventDefault(),this.href==location.href?$("html, body").animate({scrollTop:0}):(history.pushState({},"",this.href),onpopstate())}),$(".mobile-menu .menu-title").on("click",()=>{$(".mobile-menu").toggleClass("open"),$(".mobile-menu").hasClass("open")?$(".mobile-menu .menu").slideDown(300):$(".mobile-menu .menu").slideUp(300)}),$(".mobile-menu .menu a").on("click",()=>$(".mobile-menu .menu-title").click())})();
wait=a=>new Promise(b=>setTimeout(b,1e3*a)),load=a=>new Promise(b=>{var c=new Image;c.onload=()=>{c.remove(),b()},c.src=IMG_PATH+a});const IMG_PATH="/";(async()=>{var a,b;updateProgress=()=>e.text(Math.round(100*++b/a)+"%"),$("noscript").remove();const c=$("body"),d=$(".loading"),e=$(".loading .progress"),f=$(".head .intro .subtitle"),g=$(".head .slideshow-progress"),h=$(".body .content"),j=$(".body .menu .section"),k=await(()=>new Promise(a=>$.get("/data.json",a)))();onpopstate=async()=>{const l=location.pathname.substr(1).replace(/\/$/,''),m=k.pages[l];if(null==m)return;document.title=k.title==m.title?k.title:`${m.title} | ${k.title}`,a=1;var n=m.content.filter(a=>"image"==a.type);if(0<n.length&&(a+=n.map(a=>a.src.length).reduce((c,a)=>c+a)),b=0,d.hasClass("off")&&(e.text("0%"),d.removeClass("off"),c.addClass("no-scroll"),await wait(1)),scrollTo(0,0),await load(m.slideshow[0]),updateProgress(),$(".head .slideshow .current").css("background-image",`url('${IMG_PATH+m.slideshow[0]}')`),g.html(""),1<m.slideshow.length)for(i in m.slideshow)g.append("<div></div>");$(".head .intro .title").text(m.title),f.text(m.subtitle),f.toggle(null!=m.subtitle),h.html("");for(item of m.content){var o;if("text"==item.type&&(o=$("<p></p>"),o.text(item.text)),"image"==item.type){o=$("<ul></ul>");for(src of item.src){var p=$("<li></li>"),q=$("<img>");await load(src),updateProgress(),q.attr("src",IMG_PATH+src),q.attr("tabindex",0),p.append(q),o.append(p)}}h.append(o)}j.show();const r=$(".body .menu").height(),s=h.height();h.css("margin-bottom",s<r?r-s:0),j.filter((a,b)=>!$(b).prev().hasClass("open")).hide(),await wait(.5),1<m.slideshow.length&&(slideshow(m.slideshow),$(".head .slideshow-progress :first-child").addClass("fill")),d.addClass("off"),c.removeClass("no-scroll")},onpopstate()})();
var slideshow;(()=>{const a=$(".head .slideshow"),b=$(".head .slideshow .current"),c=$(".head .slideshow .next");slideshow=async d=>{const e=location.pathname;for(var f=0;location.pathname==e&&(await wait(4),location.pathname==e)&&!(f++,f>=d.length&&(f=0),await load(d[f]),location.pathname!=e);)scrollY<innerHeight&&(c.css("background-image",`url('${IMG_PATH+d[f]}')`),a.addClass("transition")),$(".head .slideshow-progress .fill").removeClass("fill"),$(`.head .slideshow-progress :nth-child(${f+1})`).addClass("fill"),await wait(1),b.css("background-image",`url('${IMG_PATH+d[f]}')`),a.removeClass("transition")}})();
(()=>{const a=$(".head .slideshow"),b=$(".head .intro"),c=$(".head .intro .title"),d=$(".body .menu"),e=$(".body .content"),f=$(".mobile"),g=$(".mobile .mobile-menu"),h=$(".mobile .mobile-menu .menu-title"),i=$(".mobile .space");var j=d.width()+30;$(".menu .section").hide();var k,l,m;(function n(){const o=700>innerWidth;if(l!=innerWidth){if(e.css("margin-left",0),!o){const a=(innerWidth-50)/2-e.width()/2;e.css("margin-left",a<j?j:a)}f.toggle(o),d.toggle(!o),i.height(h[0].offsetHeight),l=innerWidth}if(k!=scrollY||m!=innerHeight){d.toggleClass("fixed",scrollY>innerHeight);const e=scrollY>innerHeight?innerHeight:scrollY;b.css("top",e+(innerHeight-e)/2),c.css("transform",`scale(${1+.25*e/innerHeight})`),a.css("transform",`scale(${1.25-.25*e/innerHeight})`),o&&f.toggleClass("fixed",f[0].getBoundingClientRect().y>innerHeight-g[0].offsetHeight),k=scrollY,m=innerHeight}requestAnimationFrame(n)})()})();
(()=>{function a(){d.show(),e.hide(),h.text(`${j+1} / ${i.length}`);var a=new Image;a.onload=()=>{a.remove();a.src!=i[j].src||(d.hide(),e.show(),e.attr("src",i[j].src))},a.src=i[j].src}const b=$("body"),c=$(".viewer"),d=$(".viewer .loading-animation"),e=$(".viewer img"),f=$(".viewer .previous"),g=$(".viewer .next"),h=$(".viewer .index");var i,j;$(".body .content").on("click","img",function(){i=$(".body .content img").toArray(),j=i.indexOf(this),a(),b.addClass("no-scroll"),c.removeClass("off")}),f.on("click",b=>{b.stopPropagation(),j--,-1==j&&(j=i.length-1),a()}),g.on("click",b=>{b.stopPropagation(),j++,j>=i.length&&(j=0),a()}),onkeydown=a=>{c.hasClass("off")||("Escape"==a.key&&c.click(),"ArrowLeft"==a.key&&f.click(),"ArrowRight"==a.key&&g.click())},c.on("click",()=>{b.removeClass("no-scroll"),c.addClass("off")}),e.on("click",a=>a.stopPropagation())})();
